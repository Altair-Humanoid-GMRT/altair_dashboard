(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2499:(e,s,t)=>{Promise.resolve().then(t.bind(t,5892))},5892:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5155),a=t(5570),l=t.n(a),n=t(2115);let c=e=>{let{parameters:s,editingParam:t,newValue:a,setNewValue:l,handleEdit:c,handleSave:i,connectionStatus:o}=e,[d,u]=(0,n.useState)({}),[m,x]=(0,n.useState)(""),h=(0,n.useMemo)(()=>{let e={};return Object.entries(s).forEach(s=>{let[t,r]=s,a=t.split("."),l=e;for(let e=0;e<a.length-1;e++){let s=a[e];l[s]||(l[s]={_children:{}}),l=l[s]._children}l[a[a.length-1]]={data:r,fullName:t}}),e},[s]),p=e=>{u(s=>({...s,[e]:!s[e]}))},g=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=Object.entries(e);return 0===u.length?null:(0,r.jsx)("div",{className:"pl-4",style:{borderLeft:n>0?"1px solid #e5e7eb":"none"},children:u.map(e=>{let[u,m]=e;if("_children"===u)return null;let x=s?"".concat(s,".").concat(u):u,h=m._children&&Object.keys(m._children).length>0,v=d[x];if(h)return(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center py-2 cursor-pointer group hover:bg-gray-50 rounded",onClick:()=>p(x),children:[(0,r.jsx)("div",{className:"w-5 h-5 mr-2 flex items-center justify-center text-gray-500",children:v?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:u}),(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-500 opacity-0 group-hover:opacity-100",children:[Object.keys(m._children).length," parameter",1!==Object.keys(m._children).length?"s":""]})]}),v&&(0,r.jsx)("div",{className:"mt-1",children:g(m._children,x,n+1)})]},x);if(m.data){var b;return(0,r.jsx)("div",{className:"mb-3 pl-7 pr-3 py-2 hover:bg-blue-50 rounded",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:u}),(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 rounded text-xs",children:1===m.data.type?"bool":2===m.data.type?"int":3===m.data.type?"double":4===m.data.type?"string":9===m.data.type?"string[]":"unknown"})]}),(0,r.jsx)("div",{children:t===m.fullName?(0,r.jsx)("button",{onClick:()=>i(),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",disabled:"connected"!==o,children:"Save"}):(0,r.jsx)("button",{onClick:()=>c(m.fullName,m.data.value),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",disabled:"connected"!==o,children:"Edit"})})]}),(0,r.jsx)("div",{className:"mt-2",children:t===m.fullName?(0,r.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,r.jsx)("div",{className:"font-mono bg-gray-50 p-2 rounded border border-gray-200 text-gray-700",children:(null===(b=m.data.value)||void 0===b?void 0:b.toString())||"undefined"})})]})},x)}return null})})};return(0,r.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Parameters"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm flex items-center",onClick:()=>u({}),children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Collapse All"]}),(0,r.jsxs)("button",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm flex items-center",onClick:()=>{let e={},s=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object.entries(t).forEach(t=>{let[a,l]=t;if("_children"===a)return;let n=r?"".concat(r,".").concat(a):a;l._children&&Object.keys(l._children).length>0&&(e[n]=!0,s(l._children,n))})};s(h),u(e)},children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Expand All"]})]})]}),(0,r.jsx)("div",{className:"border-b border-gray-200 mb-4"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search parameters...",value:m,onChange:e=>x(e.target.value),className:"w-full p-2 pl-8 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("div",{className:"absolute left-2 top-2 text-gray-400",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:m?(0,r.jsx)("div",{children:Object.entries(s).filter(e=>{let[s]=e;return s.toLowerCase().includes(m.toLowerCase())}).map(e=>{var s;let[n,d]=e;return(0,r.jsx)("div",{className:"mb-3 pl-7 pr-3 py-2 hover:bg-blue-50 rounded",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:n}),(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 rounded text-xs",children:1===d.type?"bool":2===d.type?"int":3===d.type?"double":4===d.type?"string":9===d.type?"string[]":"unknown"})]}),(0,r.jsx)("div",{children:t===n?(0,r.jsx)("button",{onClick:()=>i(),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",disabled:"connected"!==o,children:"Save"}):(0,r.jsx)("button",{onClick:()=>c(n,d.value),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",disabled:"connected"!==o,children:"Edit"})})]}),(0,r.jsx)("div",{className:"mt-2",children:t===n?(0,r.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,r.jsx)("div",{className:"font-mono bg-gray-50 p-2 rounded border border-gray-200 text-gray-700",children:(null===(s=d.value)||void 0===s?void 0:s.toString())||"undefined"})})]})},n)})}):g(h)})]})};function i(e){let{rosRef:s,connectionStatus:t,onRestore:a,onRefresh:c}=e,[i,o]=(0,n.useState)([]),[d,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),[y,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1),[_,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{"connected"===t&&T()},[t]);let T=async()=>{if(!s.current||"connected"!==t){N("ROS connection not established");return}j(!0),N(null);let e=new(l()).Service({ros:s.current,name:"/param_manager/get_all_history_file",serviceType:"std_srvs/srv/Trigger"}),r=new(l()).ServiceRequest({});e.callService(r,e=>{if(j(!1),e.success)try{let s=JSON.parse(e.message);o(s)}catch(e){N("Error parsing history files: ".concat(e.message))}else N("Failed to fetch history files: ".concat(e.message))},e=>{j(!1),N("Service call failed: ".concat(e))})},O=e=>{if(!s.current||"connected"!==t){N("ROS connection not established");return}j(!0),N(null),new(l()).Topic({ros:s.current,name:"/param_manager/file_path",messageType:"std_msgs/String"}).publish(new(l()).Message({data:e})),setTimeout(()=>{let e=new(l()).Service({ros:s.current,name:"/param_manager/load_parameters_from_file",serviceType:"std_srvs/srv/Trigger"}),t=new(l()).ServiceRequest({});e.callService(t,e=>{j(!1),e.success?(a(),c()):N("Failed to load parameters: ".concat(e.message))},e=>{j(!1),N("Service call failed: ".concat(e))})},500)},R=e=>{if(!s.current||"connected"!==t){N("ROS connection not established");return}j(!0),N(null),u(e),new(l()).Topic({ros:s.current,name:"/param_manager/file_path_preview",messageType:"std_msgs/String"}).publish(new(l()).Message({data:e.path})),setTimeout(()=>{let e=new(l()).Service({ros:s.current,name:"/param_manager/get_parameters_from_file",serviceType:"std_srvs/srv/Trigger"}),t=new(l()).ServiceRequest({});e.callService(t,e=>{if(j(!1),e.success)try{let s=JSON.parse(e.message);x(s)}catch(e){N("Error parsing parameters: ".concat(e.message))}else N("Failed to preview parameters: ".concat(e.message))},e=>{j(!1),N("Service call failed: ".concat(e))})},500)},M=e=>{if(!s.current||"connected"!==t){N("ROS connection not established");return}j(!0),N(null),new(l()).Topic({ros:s.current,name:"/param_manager/file_path_delete",messageType:"std_msgs/String"}).publish(new(l()).Message({data:e.path})),setTimeout(()=>{let e=new(l()).Service({ros:s.current,name:"/param_manager/delete_parameter_file",serviceType:"std_srvs/srv/Trigger"}),t=new(l()).ServiceRequest({});e.callService(t,e=>{j(!1),e.success?T():N("Failed to delete file: ".concat(e.message))},e=>{j(!1),N("Service call failed: ".concat(e))}),T()},500)},P=e=>{if(!s.current||"connected"!==t){N("ROS connection not established");return}j(!0),N(null),v(e),new(l()).Topic({ros:s.current,name:"/param_manager/file_path_preview",messageType:"std_msgs/String"}).publish(new(l()).Message({data:e.path})),setTimeout(()=>{let e=new(l()).Service({ros:s.current,name:"/param_manager/get_parameters_from_file",serviceType:"std_srvs/srv/Trigger"}),t=new(l()).ServiceRequest({});e.callService(t,e=>{if(j(!1),e.success)try{let s=JSON.parse(e.message);f(s)}catch(e){N("Error parsing parameters: ".concat(e.message))}else N("Failed to load comparison parameters: ".concat(e.message))},e=>{j(!1),N("Service call failed: ".concat(e))})},500)},A=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Set([...Object.keys(e||{}),...Object.keys(s||{})]),a=[];for(let l of r){let r=t?"".concat(t,".").concat(l):l,n=null==e?void 0:e[l],c=null==s?void 0:s[l];if("object"!=typeof n||"object"!=typeof c||null===n||null===c||Array.isArray(n)||Array.isArray(c)){let e=JSON.stringify(n),s=JSON.stringify(c);a.push({key:r,value1:n,value2:c,isDifferent:e!==s})}else a=[...a,...A(n,c,r)]}return a},E=e=>{M(e)},L=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?(0,r.jsx)("span",{className:"text-gray-400",children:"null"}):"object"!=typeof e||Array.isArray(e)?Array.isArray(e)?(0,r.jsxs)("div",{className:"font-mono text-sm",children:["[",e.map((s,t)=>(0,r.jsxs)("span",{className:"ml-2",children:["object"==typeof s?JSON.stringify(s):s.toString(),t<e.length-1?", ":""]},t)),"]"]}):(0,r.jsx)("span",{className:"font-mono text-sm",children:e.toString()}):(0,r.jsx)("div",{className:"pl-4",children:Object.entries(e).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-700",children:[t,": "]}),L(a,s+1)]},t)})})};return(0,r.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Parameter History"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{p(!h),h||(v(null),f(null))},className:"px-3 py-1 ".concat(h?"bg-purple-600":"bg-blue-600"," text-white rounded hover:opacity-90 transition-colors"),children:h?"Exit Compare Mode":"Compare Mode"}),(0,r.jsx)("button",{onClick:T,className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Refresh"})]})]}),w&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:w}),y?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===i.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No history files found"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"overflow-auto max-h-[400px] bg-white rounded-lg shadow",children:(0,r.jsxs)("table",{className:"min-w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Filename"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modified"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e,s)=>(0,r.jsxs)("tr",{className:"".concat((null==d?void 0:d.path)===e.path?"bg-blue-50":""," hover:bg-gray-50"),children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.filename}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.modified}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,r.jsx)("button",{onClick:()=>R(e),className:"text-blue-600 hover:text-blue-900 mr-2",children:"Preview"}),h&&d&&d.path!==e.path&&(0,r.jsx)("button",{onClick:()=>P(e),className:"text-purple-600 hover:text-purple-900 mr-2",children:"Compare"}),(0,r.jsx)("button",{onClick:()=>O(e.path),className:"text-green-600 hover:text-green-900",children:"Restore"}),(0,r.jsx)("button",{onClick:()=>{C(e),k(!0)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},s))})]})}),h&&g&&b?(()=>{if(!m||!b)return null;let e=A(m,b),s={};return e.forEach(e=>{let t=e.key.split(".")[0];s[t]||(s[t]=[]),s[t].push(e)}),(0,r.jsxs)("div",{className:"mt-4 bg-white rounded-lg shadow p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Parameter Comparison"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-2 font-semibold bg-gray-100 p-2",children:[(0,r.jsx)("div",{children:"Parameter"}),(0,r.jsxs)("div",{className:"text-blue-600",children:[null==d?void 0:d.filename," (Selected)"]}),(0,r.jsxs)("div",{className:"text-purple-600",children:[null==g?void 0:g.filename," (Compare)"]})]}),(0,r.jsx)("div",{className:"overflow-auto max-h-[400px]",children:Object.entries(s).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-bold text-gray-700 mb-2 bg-gray-50 p-2",children:s}),t.map((e,s)=>{let t=e.isDifferent,a=e.key.split("."),l=a.length>1?a.slice(1).join("."):e.key;return(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 py-2 ".concat(t?"bg-yellow-50":""," border-b border-gray-200"),children:[(0,r.jsx)("div",{className:"font-mono text-sm break-all",children:l}),(0,r.jsx)("div",{className:"".concat(t?"text-blue-600":""," break-all"),children:void 0===e.value1?(0,r.jsx)("span",{className:"text-gray-400",children:"undefined"}):"object"==typeof e.value1?(0,r.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(e.value1,null,2)}):(0,r.jsx)("span",{className:"font-mono text-sm",children:String(e.value1)})}),(0,r.jsx)("div",{className:"".concat(t?"text-purple-600":""," break-all"),children:void 0===e.value2?(0,r.jsx)("span",{className:"text-gray-400",children:"undefined"}):"object"==typeof e.value2?(0,r.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(e.value2,null,2)}):(0,r.jsx)("span",{className:"font-mono text-sm",children:String(e.value2)})})]},s)})]},s)})})]})})():d&&m&&(m?(0,r.jsxs)("div",{className:"mt-4 bg-white rounded-lg shadow p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Parameter Preview"}),(0,r.jsx)("div",{className:"overflow-auto max-h-[400px]",children:Object.entries(m).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"py-2 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"font-medium",children:s}),L(t)]},s)})})]}):null)]}),S&&_&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",onClick:()=>k(!1),children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Confirm Delete"}),(0,r.jsxs)("p",{className:"mb-6",children:['Are you sure you want to delete "',_.filename,'"? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",onClick:()=>k(!1),children:"Cancel"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:()=>{E(_),k(!1)},children:"Delete"})]})]})})]})}function o(){let[e,s]=(0,n.useState)({}),[t,a]=(0,n.useState)(null),[o,d]=(0,n.useState)({x:0,y:0,z:0}),[u,m]=(0,n.useState)(""),[x,h]=(0,n.useState)("disconnected"),[p,g]=(0,n.useState)("ws://localhost:9090"),[v,b]=(0,n.useState)(0),[f,y]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[N,S]=(0,n.useState)(""),[k,_]=(0,n.useState)(""),C=n.useRef(null),T=(0,n.useCallback)(()=>{C.current&&(C.current.removeAllListeners(),C.current.close(),C.current=null),C.current=new(l()).Ros({url:p}),console.log(p),C.current.on("connection",()=>{console.log("Connected to websocket server."),h("connected"),b(0),O(),R()}),C.current.on("error",e=>{console.error("Error connecting to websocket server: ",e),h("error"),v<5&&setTimeout(()=>{b(e=>e+1),T()},3500)}),C.current.on("close",()=>{console.log("Connection to websocket server closed."),h("disconnected"),v<5&&setTimeout(()=>{b(e=>e+1),T()},3500)})},[v]);(0,n.useEffect)(()=>(T(),()=>{C.current&&(C.current.removeAllListeners(),C.current.close(),C.current=null)}),[T]);let O=(0,n.useCallback)(()=>{if(!C.current||"connected"!==x){console.warn("Cannot fetch parameters: ROS connection not established");return}let e=new(l()).Service({ros:C.current,name:"/quintic_walk/list_parameters",serviceType:"rcl_interfaces/srv/ListParameters"}),s=new(l()).ServiceRequest({});e.callService(s,e=>{P(e.result.names)})},[x]),R=(0,n.useCallback)(()=>{if(!C.current||"connected"!==x){console.warn("Cannot fetch parameters: ROS connection not established");return}new(l()).Param({ros:C.current}).get(null,e=>{console.log(e)})},[x]),M=()=>{O(),R()},P=(0,n.useCallback)(e=>{if(!C.current||"connected"!==x)return;let t=new(l()).Service({ros:C.current,name:"/quintic_walk/get_parameters",serviceType:"rcl_interfaces/srv/GetParameters"}),r=new(l()).ServiceRequest({names:e});t.callService(r,t=>{let r={};e.forEach((e,s)=>{let a=t.values[s];r[e]={value:A(a),type:a.type}}),s(r)})},[x]),A=e=>{switch(e.type){case 1:return e.bool_value;case 2:return e.integer_value;case 3:return e.double_value;case 4:return e.string_value;case 9:return e.string_array_value;default:return}},E=(s,t)=>{var r;let a=new(l()).Service({ros:C.current,name:"/quintic_walk/set_parameters",serviceType:"rcl_interfaces/srv/SetParameters"}),n=null===(r=e[s])||void 0===r?void 0:r.type;if(void 0===n){console.error("Parameter type for ".concat(s," not found."));return}let c=new(l()).Message({name:s,value:{type:n}});switch(n){case 1:c.value.bool_value="true"===t;break;case 2:c.value.integer_value=parseInt(t,10);break;case 3:c.value.double_value=parseFloat(t);break;case 4:c.value.string_value=t;break;case 9:c.value.string_array_value=t.split(",");break;default:console.error("Unsupported parameter type: ".concat(n));return}let i=new(l()).ServiceRequest({parameters:[c]});a.callService(i,e=>{e.results[0].successful?(console.log("Parameter ".concat(s," updated successfully.")),O()):(console.error(e.results[0]),console.error("Failed to update parameter ".concat(s,".")))})},L=(e,s)=>{a(e),m((null==s?void 0:s.toString())||"")},z=(e,s,t)=>{console.log(o);let r=new(l()).Topic({ros:C.current,name:"/cmd_vel",messageType:"geometry_msgs/Twist"}),a=new(l()).Message({linear:{x:e,y:s,z:0},angular:{x:0,y:0,z:t}});r.publish(a)},F=(e,s,t)=>{let r=new(l()).Topic({ros:C.current,name:"/cmd_vel",messageType:"geometry_msgs/Twist"}),a=new(l()).Message({linear:{x:e,y:s,z:0},angular:{x:-1,y:0,z:t}});r.publish(a)},q=()=>{null!==t&&(d(e=>({...e,[t]:parseFloat(u)})),a(null),m(""))};return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 p-6",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between mb-8 pb-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Altair Dashboard"}),(0,r.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("connected"===x?"bg-green-100 text-green-800":"error"===x?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:x})]}),(0,r.jsxs)("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:"connected"!==x,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Command Parameters"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"text-left p-3 text-gray-600 font-semibold",children:"Parameter Name"}),(0,r.jsx)("th",{className:"text-left p-3 text-gray-600 font-semibold",children:"Value"}),(0,r.jsx)("th",{className:"text-left p-3 text-gray-600 font-semibold",children:"Actions"}),(0,r.jsx)("th",{className:"text-left p-3 text-gray-600 font-semibold",children:"Type"})]})}),(0,r.jsx)("tbody",{children:Object.entries(o).map((e,s)=>{let[a,l]=e;return(0,r.jsxs)("tr",{className:"".concat(s%2==0?"bg-gray-50":"bg-white"," hover:bg-blue-50"),children:[(0,r.jsx)("td",{className:"p-3 border-t border-gray-200",children:a}),(0,r.jsx)("td",{className:"p-3 border-t border-gray-200",children:t===a?(0,r.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,r.jsx)("span",{className:"font-mono",children:(null==l?void 0:l.toString())||"undefined"})}),(0,r.jsx)("td",{className:"p-3 border-t border-gray-200",children:t===a?(0,r.jsx)("button",{onClick:q,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:opacity-50",disabled:"connected"!==x,children:"Save"}):(0,r.jsx)("button",{onClick:()=>L(a,l),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:"connected"!==x,children:"Edit"})}),(0,r.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:"double"})})]},a)})})]})})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4 mb-8",children:[(0,r.jsxs)("button",{onClick:()=>z(o.x,o.y,o.z),className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",disabled:"connected"!==x,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Play"]}),(0,r.jsxs)("button",{onClick:()=>F(0,0,0),className:"flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 font-medium",disabled:"connected"!==x,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Stop"]})]}),(0,r.jsx)(i,{rosRef:C,connectionStatus:x,onRestore:()=>{S("success"),_("Parameters restored successfully"),w(!0)},onRefresh:M}),(0,r.jsx)(c,{parameters:e,connectionStatus:x,handleEdit:L,handleSave:()=>{t&&""!==u&&(E(t,u),a(null),m(""))},setNewValue:m,newValue:u,editingParam:t}),(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("button",{onClick:()=>{if(!C.current||"connected"!==x){console.warn("Cannot save parameters: ROS connection not established"),S("error"),_("Cannot save parameters: ROS connection not established"),w(!0);return}y(!0);let e=new(l()).Service({ros:C.current,name:"/param_manager/save_parameters",serviceType:"std_srvs/srv/Trigger"}),s=new(l()).ServiceRequest({});e.callService(s,e=>{e.success?(y(!1),console.log("Parameters saved successfully."),S("success"),_("Parameters saved successfully."),w(!0),M()):(y(!1),console.error("Failed to save parameters."),S("error"),_("Failed to save parameters: "+e.message),w(!0))})},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 font-medium",disabled:"connected"!==x||f,children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})}),"Save Parameters to File"]})})}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium ".concat("success"===N?"text-green-700":"text-red-700"),children:"success"===N?"Success":"Error"}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("p",{className:"text-gray-700",children:k})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 rounded-md text-white ".concat("success"===N?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:"Close"})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[570,441,517,358],()=>s(2499)),_N_E=e.O()}]);