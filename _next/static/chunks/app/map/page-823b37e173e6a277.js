(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{4146:(e,t,n)=>{Promise.resolve().then(n.bind(n,9829))},9829:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(5155),i=n(2115),r=n(5565),s=n(5570),a=n.n(s);function d(){let e=(0,i.useRef)(null),[t,n]=(0,i.useState)(null),[s,d]=(0,i.useState)(null),[c,p]=(0,i.useState)([]),[x,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=new(a()).Ros({url:"ws://localhost:9090"});return e.on("connection",()=>{console.log("ROS Connected"),h(!0)}),e.on("error",e=>{console.error("ROS Error:",e),h(!1)}),e.on("close",()=>{console.log("ROS Disconnected"),h(!1)}),d(e),()=>e.close()},[]),(0,i.useEffect)(()=>{if(!s||!x)return;let e=new(a()).Topic({ros:s,name:"/walk_engine_odometry",messageType:"nav_msgs/Odometry"});return e.subscribe(e=>{let{position:t,orientation:o}=e.pose.pose,i=Math.atan2(2*(o.w*o.z+o.x*o.y),1-2*(o.y*o.y+o.z*o.z));n({x:t.x,y:t.y,theta:i,heading:u(i),timestamp:new Date().toLocaleTimeString()})}),()=>e.unsubscribe()},[s,x]);let u=e=>["N","NE","E","SE","S","SW","W","NW"][Math.round((180/Math.PI*e%360+360)%360/45)%8],b=e=>{p(t=>t.filter(t=>t.id!==e))};return(0,o.jsxs)("div",{style:l.container,children:[(0,o.jsxs)("div",{ref:e,style:l.mapContainer,children:[(0,o.jsx)(r.default,{src:"/map.png",alt:"Map",fill:!0,style:l.mapImage,priority:!0}),t&&(0,o.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"\n              translate(\n                calc(-50% + ".concat(100*t.x,"px),\n                calc(-50% - ").concat(100*t.y,"px)\n              )\n              rotate(").concat(t.theta,"rad)\n            "),zIndex:20},children:[(0,o.jsx)("div",{style:l.robotBase}),(0,o.jsx)("div",{style:l.robotHeading}),(0,o.jsx)("div",{style:l.headingLabel,children:t.heading})]}),c.map(e=>(0,o.jsx)("div",{style:{...l.staticMarker,transform:"\n                translate(\n                  calc(-50% + ".concat(100*e.x,"px),\n                  calc(-50% - ").concat(100*e.y,"px)\n                )\n              ")},children:(0,o.jsx)("div",{style:l.markerHeading,children:e.heading})},e.id))]}),(0,o.jsxs)("div",{style:l.controlPanel,children:[(0,o.jsx)("button",{onClick:()=>{t&&p(e=>[...e,{id:Date.now(),x:t.x,y:t.y,heading:t.heading,timestamp:t.timestamp,status:"active"}])},style:l.button,disabled:!t,children:"Add Marker at Current Position"}),(0,o.jsxs)("div",{style:l.status,children:["ROS: ",(0,o.jsx)("span",{style:{color:x?"green":"red"},children:x?"Connected":"Disconnected"}),t&&" | Position: (".concat(t.x.toFixed(2),", ").concat(t.y.toFixed(2),")"),t&&" | Heading: ".concat(t.heading," (").concat((180*t.theta/Math.PI).toFixed(1),"\xb0)")]})]}),(0,o.jsxs)("div",{style:l.monitoringPanel,children:[(0,o.jsx)("h3",{style:l.panelTitle,children:"Marker Monitoring"}),(0,o.jsxs)("table",{style:l.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"ID"}),(0,o.jsx)("th",{children:"Position (X,Y)"}),(0,o.jsx)("th",{children:"Heading"}),(0,o.jsx)("th",{children:"Timestamp"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Action"})]})}),(0,o.jsx)("tbody",{children:c.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.id.toString().slice(-4)}),(0,o.jsxs)("td",{children:["(",e.x.toFixed(2),", ",e.y.toFixed(2),")"]}),(0,o.jsx)("td",{children:e.heading}),(0,o.jsx)("td",{children:e.timestamp}),(0,o.jsx)("td",{style:{color:"active"===e.status?"green":"red"},children:e.status.toUpperCase()}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{onClick:()=>b(e.id),style:l.smallButton,children:"Remove"})})]},e.id))})]})]})]})}let l={container:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",fontFamily:"Arial, sans-serif"},mapContainer:{position:"relative",width:"800px",height:"600px",border:"2px solid #333",marginBottom:"20px"},mapImage:{objectFit:"contain",pointerEvents:"none"},robotBase:{width:"24px",height:"24px",backgroundColor:"blue",borderRadius:"50%",border:"2px solid white",position:"relative"},robotHeading:{position:"absolute",top:"-15px",left:"50%",width:"0",height:"0",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"15px solid red",transform:"translateX(-50%)"},headingLabel:{position:"absolute",top:"-35px",left:"50%",transform:"translateX(-50%)",background:"rgba(255,255,255,0.8)",padding:"2px 5px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},staticMarker:{position:"absolute",left:"50%",top:"50%",width:"16px",height:"16px",backgroundColor:"#4CAF50",borderRadius:"50%",border:"2px solid white",zIndex:15,display:"flex",justifyContent:"center",alignItems:"center"},markerHeading:{position:"absolute",top:"-20px",fontSize:"10px",fontWeight:"bold",background:"rgba(255,255,255,0.8)",padding:"1px 3px",borderRadius:"2px"},controlPanel:{width:"800px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},button:{padding:"10px 15px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",":disabled":{backgroundColor:"#cccccc",cursor:"not-allowed"}},status:{fontSize:"14px",color:"#333"},monitoringPanel:{width:"800px",border:"1px solid #ddd",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},panelTitle:{marginTop:"0",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"},table:{width:"100%",borderCollapse:"collapse",marginTop:"10px",fontSize:"14px"},smallButton:{padding:"5px 10px",fontSize:"12px",backgroundColor:"#ffebee",border:"1px solid #ef9a9a",borderRadius:"3px",cursor:"pointer"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[570,565,441,517,358],()=>t(4146)),_N_E=e.O()}]);